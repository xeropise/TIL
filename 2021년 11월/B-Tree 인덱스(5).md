### B-Tree 인덱스의 정렬 및 스캔 방향

- 인덱스를 생성할 때 설정한 정렬 규칙에 따라서 인덱스의 키 값은 항상 오름차순이거나 내림차순으로 정렬되어 저장된다.

  

- 하지만 어떤 인덱스가 오름차순으로 생성됐다고 해서 그 인덱스를 오름차순으로만 읽을 수 있다는 뜻은 아니다.

  

- 사실 그 인덱스를 거꾸로 끝에서부터 읽으면 내림차순으로 정렬된 인덱스로도 사용될 수 있다.

  

- 인덱스를 어느 방향으로 읽을지는 쿼리에 따라 옵티마이저가 실시간으로 만들어 내는 실행 계획에 따라 결정된다.



<br>

***

### 인덱스의 정렬

- 일반적인 상용 DBMS 엥서는 인덱스를 생성하는 시점에 인덱스를 구성하는 각 컬럼의 정렬을 오름차순 또는 내림차순으로 설정할 수 있다.

  

- MySQL 5.7 버전까지는 컬럼 단위로 정렬 순서를 혼합(ASC 와 DESC 혼합)해서 인덱스를 생성할 수 없었다.

  - 이런 문제점을 해결하기 위해 숫자  컬럼으 경우 -1을 곱한 값을 저장하는 우회 방법을 사용하기도 했다.

    

- MySQL 8.0 버전부터는 다음과 같은 형태의 정렬 순서를 홉한한 인덱스도 생성할 수 있게 됐다.

  - 5.7 버전에서도 오름차순 컬럼과 내림차순 컬럼을 혼합한 인덱스를 생성가능하게 한거 같으나 문법만 제공했을 뿐이지 

    실제론 오름차순 정렬으로만 인덱스가 생성되었다.

```sql
CREATE INDEX ix_teamname_userscroe ON employees (team_name ASC, user_score DESC);
```



<br>

***

### 인덱스 스캔 방향



