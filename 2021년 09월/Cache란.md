## 캐시(Cache)란?

- 자주 사용하는 데이터나 값을 미리 복사해 놓은 임시 장소를 말한다.

- 저장 공간이 작고 비용이 비싼 대신 빠른 성능을 제공한다.

  ![다운로드](https://user-images.githubusercontent.com/50399804/132229275-1f99fa2e-ca94-44c6-aa5a-c1fcd4773e57.png)

  > 캐시 메모리 구조에 대한 설명은 [여기](https://gourmet-eundong.tistory.com/22)를 참조하자. [이 영상](https://youtu.be/c33ojJ7kE7M) 도 매우 잘 설명하고 있다.

- 데이터를 미리 저장해 놓으면, 계산이나 접근 시간 없이 빠른속도로 데이터에 접근 가능하다.

- 말하자면 서버에서 데이터를 불러오는 경우에 DBMS 혹은 서버에 요청하는 것이 아니라 Memory에 데이터를 저장했다가 불러다 쓰는 것을 말한다.

- 브라우저에서의 경우, 자바스크립트 파일 이미지를 하드 디스크에 저장하는 것을 말한다.

  ![img](https://user-images.githubusercontent.com/50399804/132231485-cc76d6b5-73fb-4ba3-9e99-f0c4b6804e50.png)

<br>

### 그나저나 캐시 메모리는 왜 도입되었을까?

- CPU와 RAM(메모리)와의 성능 차이 때문이다.

- CPU와 달리 메모리는 속도보다 메모리 자체 용량을 늘리는 것이 주 목표 였다.

- 시간이 지남에 따라 성능 차이가 더 벌어졌다.

- CPU는 데이터 처리를 위해 메모리와 끊임 없이 데이터를 주고 받는 구조에서 메모리가 CPU의 데이터 처리 속도를 쫓아가지 못한다.

  - CPU가 메모리를 기다려야 하는 병목현상 발생, 이 병목현상을 완화하기 위해 도입됨

- 캐시 메모리에 향후 재사용할 데이터를 저장해둔 후, CPU가 요청하는 데이터를 바로 전달하도록 함

- 캐시 메모리의 용량을 크게 쓰거나? 메인 메모리로 사용하면 되지 않을까?
  - 가격이 터무니 없이 비싸다.

---

## 캐시는 언제 사용해야 할까?

- 네이버나 다음과 같은 검색 사이트에서 보통 사이트 메인에 있는 정보들은 수많은 사용자들이 처음보게되는 화면이고, 보통 이런정보들은 잘 변하지 않는다.

- 즉, 반복적으로 동일한 결과를 돌려주고, 잘 변하지 않는 경우의 데이터

- 접근 시간에 비해 원래 데이터를 접근하는 시간이 오래 걸리는 균일한 데이터에 캐시를 사용하면 좋다.

<br>

![17110B4350CC5EC51D](https://user-images.githubusercontent.com/50399804/132230034-af021bca-0241-4a33-8562-8867a31a5b9b.jpeg)

> Long tail 법칙에 따르면, 20%의 요구가 시스템 리소스의 대부분을 잡아먹는다고 한다. 그럼 20%에 캐시를 사용하면 리소스 사용량을 대폭 줄일 수 있다는 말이다.

<br>

---

## 캐시는 어떻게 동작할까?

- 데이터 요청 시, 원본 데이터를 찾기 위해 캐시의 내부 부터 탐색한다.

  - 캐시에 원하는 데이터가 없거나 (Cache miss), 너무 오래되었을 경우(Expiration) 원본 데이터를 탐색하여 데이터를 가져온다. 가져오면서 해당 데이터를 복사하거나 혹은 갱신한다.

  - 캐시에 원하는 데이터가 있으면 데이터 탐색을 진행하지 않고, 캐시로부터 해당 데이터를 제공한다. (Cache hit)

- 캐시 공간은 비교적 작으므로 안 쓰는 데이터부터 삭제하고, 공간을 확보한다.

<br>

---

## 서버에서 캐시의 종류

### Local Cache VS Global Cache

- Local Cache

![다운로드 (1)](https://user-images.githubusercontent.com/50399804/132232054-79374b79-c411-4746-893b-40d947465ca2.png)

- 서버마다 캐시를 따로 저장한다.

- 다른 서버의 캐시를 참조하기 어렵다.

- 서버 내에서 작동하기 때문에 속도가 빠르다.

- 로컬 서버 장비의 리소스 (Memory, Disk) 를 이용한다.

- Global Cache

![다운로드 (2)](https://user-images.githubusercontent.com/50399804/132232052-718d2247-fea6-40e1-b089-5c17d3942bc2.png)

- 여러 서버에서 Cache Server에 접근하여 사용하는 캐시

- 데이터를 분산하여 저장할 수 있다.

  - Replication : 데이터 복제, 2개 이상의 DBMS 시스템을 Master / Slave 로 나눠서 동일한 데이터를 저장하는 방식
  - Sharding : 데이터 분산 저장

- Local Cache에 비해 상대적으로 느리지만 별도의 Cache Server를 이용하기 때문에 서버 간 데이터 공유가 원활하다는 장점이 있다.

<br>

---

## 대표적인 캐시 사용 예

### CDN(Content Delivery Network | Content Distribution Network)

- 미국에 있는 유튜브 영상을 한국에서 어떻게 빠르게 시청할 수 있을까? 거리로 인한 네트워크 속도 차이가 날텐데...

- 인터넷 회선은 매우 비싸고 용량을 늘리기도 상당히 어렵다.

- 구글은 세계의 각 지역에 캐시 서버를 설치하여, 미국 서버까지 접속할 필요 없이 사용자가 사용하려는 경우, 주위의 서버에서 처리하도록 하였다.

- 이를 통해, 비용 절감 및 버퍼링이 줄고 서비스 이용 경험을 개선시켰다.

- 이처럼 세계 각지에 캐시 서버를 두고 전송속도를 높이고 부하를 분산하는 시스템이 바로 CDN 이다.
